<header class="dairy-header">
    <div class="header-inner container mx-auto px-4">
        <!-- ‚îÄ‚îÄ Logo -->
        <a routerLink="/" class="logo cursor-pointer" aria-label="DairyDrop Home">
            <svg class="logo-drop" viewBox="0 0 60 78" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="hdrLg" x1="0" y1="0" x2="0" y2="78" gradientUnits="userSpaceOnUse">
                        <stop offset="0%" stop-color="#6DD5FA" />
                        <stop offset="100%" stop-color="#2980B9" />
                    </linearGradient>
                </defs>
                <path d="M30 0C30 0 0 32 0 50C0 65.4 13.4 78 30 78C46.6 78 60 65.4 60 50C60 32 30 0 30 0Z"
                    fill="url(#hdrLg)" />
                <ellipse cx="30" cy="62" rx="14" ry="7" fill="white" opacity="0.4" transform="rotate(-10,30,62)" />
                <ellipse cx="21" cy="28" rx="5" ry="10" fill="white" opacity="0.3" transform="rotate(-20,21,28)" />
            </svg>
            <div class="logo-text">
                <span class="logo-title">Dairy<span class="logo-accent">Drop</span></span>
                <span class="logo-tagline">FRESH FROM THE FARM</span>
            </div>
        </a>
        <nav class="nav-links" aria-label="Main navigation">
            <a routerLink="/" routerLinkActive="nav-active" class="nav-link">Home</a>
            <a routerLink="/products" routerLinkActive="nav-active" class="nav-link">Products</a>
            <a routerLink="/about" routerLinkActive="nav-active" class="nav-link">About</a>
            <a routerLink="/contact" routerLinkActive="nav-active" class="nav-link">Contact</a>
        </nav>
        <div class="header-actions">
            <button type="button" class="cart-btn" routerLink="/cart" aria-label="View cart">
                <span class="btn-icon-wrap">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z" />
                        <line x1="3" y1="6" x2="21" y2="6" />
                        <path d="M16 10a4 4 0 01-8 0" />
                    </svg>
                    <span class="cart-badge">{{cartService.cart().length}}</span>
                </span>
                <span class="btn-label">Cart</span>
            </button>

            <!-- Divider -->
            <div class="action-divider" aria-hidden="true"></div>

            <!-- User avatar + name -->
            @if (authService.currentUser()) {
            <div class="user-chip">
                <div class="user-avatar">
                    {{ currentUser()?.name?.charAt(0)?.toUpperCase() }}
                </div>
                <span class="user-name">{{ currentUser()?.name }}</span>
            </div>
            }

            <!-- Logout button -->
            <button type="button" class="logout-btn" (click)="authService.logout()" aria-label="Sign out">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.9"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4" />
                    <polyline points="16 17 21 12 16 7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                <span class="btn-label">Logout</span>
            </button>

        </div>

        <!-- ‚îÄ‚îÄ Mobile menu toggle -->
        <button class="mobile-menu-btn" type="button" (click)="toggleMobileMenu()" [attr.aria-expanded]="menuOpen()"
            aria-label="Toggle menu">
            <span class="burger" [class.open]="menuOpen()">
                <span></span><span></span><span></span>
            </span>
        </button>

    </div>

    <!-- ‚îÄ‚îÄ Mobile dropdown -->
    <div class="mobile-menu" [class.open]="menuOpen()">
        <nav class="mobile-nav">
            <a routerLink="/" (click)="closeMobileMenu()" class="mobile-link">üè† Home</a>
            <a routerLink="/products" (click)="closeMobileMenu()" class="mobile-link">ü•õ Products</a>
            <a routerLink="/about" (click)="closeMobileMenu()" class="mobile-link">‚ÑπÔ∏è About</a>
            <a routerLink="/contact" (click)="closeMobileMenu()" class="mobile-link">‚úâÔ∏è Contact</a>
        </nav>
        <div class="mobile-actions">
            <button routerLink="/cart" (click)="closeMobileMenu()" class="mobile-cart-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z" />
                    <line x1="3" y1="6" x2="21" y2="6" />
                    <path d="M16 10a4 4 0 01-8 0" />
                </svg>
                Cart
                <!-- @if (cartCount() > 0) { <span class="mobile-badge">{{ cartCount() }}</span> } -->
            </button>
            <button (click)="onLogout()" class="mobile-logout-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.9"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4" />
                    <polyline points="16 17 21 12 16 7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                Logout
            </button>
        </div>
    </div>
</header>
<!-- Spacer so content doesn't hide behind fixed header -->
<div class="header-spacer"></div>